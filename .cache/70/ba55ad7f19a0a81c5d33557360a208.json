{"id":"../node_modules/gine/dist/gine/core.js","dependencies":[{"name":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/core.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/bjeaurn/Development/ld45/package.json","includedInParent":true,"mtime":1570266166000},{"name":"/Users/bjeaurn/Development/ld45/node_modules/gine/package.json","includedInParent":true,"mtime":1570228202000},{"name":"rxjs","loc":{"line":3,"column":21},"parent":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/core.js","resolved":"/Users/bjeaurn/Development/ld45/node_modules/rxjs/_esm5/index.js"},{"name":"rxjs/operators","loc":{"line":4,"column":26},"parent":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/core.js","resolved":"/Users/bjeaurn/Development/ld45/node_modules/rxjs/_esm5/operators/index.js"},{"name":"./canvas","loc":{"line":5,"column":23},"parent":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/core.js","resolved":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/canvas.js"},{"name":"./handle","loc":{"line":6,"column":23},"parent":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/core.js","resolved":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/handle.js"},{"name":"./store","loc":{"line":7,"column":22},"parent":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/core.js","resolved":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/store.js"},{"name":"./text","loc":{"line":8,"column":21},"parent":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/core.js","resolved":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/text.js"},{"name":"./keyboard","loc":{"line":9,"column":25},"parent":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/core.js","resolved":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/keyboard.js"},{"name":"./mouse","loc":{"line":10,"column":22},"parent":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/core.js","resolved":"/Users/bjeaurn/Development/ld45/node_modules/gine/dist/gine/mouse.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar rxjs_1 = require(\"rxjs\");\nvar operators_1 = require(\"rxjs/operators\");\nvar canvas_1 = require(\"./canvas\");\nvar handle_1 = require(\"./handle\");\nvar store_1 = require(\"./store\");\nvar text_1 = require(\"./text\");\nvar keyboard_1 = require(\"./keyboard\");\nvar mouse_1 = require(\"./mouse\");\nvar Gine = (function () {\n    function Gine(config) {\n        this.config = config;\n        this.fps = 0;\n        this.frameCount = 0;\n        this.delta = 0;\n        this.tickrate = 0;\n        this.tickNr = 0;\n        if (this.config.canvas === null) {\n            throw new Error('No canvas given!');\n        }\n        Gine.CONFIG = this.config;\n        Gine.events = Gine.eventsSubject.asObservable().pipe(operators_1.share());\n        Gine.canvas = new canvas_1.Canvas(Gine.CONFIG.canvas);\n        Gine.handle = new handle_1.Handle(Gine.canvas);\n        Gine.store = new store_1.Store();\n        if (Gine.CONFIG.enableKeyboard) {\n            Gine.keyboard = new keyboard_1.Keyboard();\n        }\n        if (Gine.CONFIG.enableMouse) {\n            Gine.mouse = new mouse_1.Mouse();\n        }\n        this.second = performance.now();\n        this.then = this.second;\n        this.fpsMs = 1000 / Gine.CONFIG.maxFps;\n        this.tickMs = 1000 / Gine.CONFIG.tickRate;\n        Gine.handle.setFont(new text_1.Font('Helvetica', 16));\n        Gine.handle.setColor(0, 0, 0, 0.8);\n        var ticks = rxjs_1.interval(this.tickMs).pipe(operators_1.map(function () { return 'tick'; }));\n        var frames = rxjs_1.interval(this.fpsMs).pipe(operators_1.map(function () { return 'frame'; }));\n        var seconds = rxjs_1.interval(1000).pipe(operators_1.map(function () { return 'second'; }));\n        this.update$ = rxjs_1.merge(ticks, frames, seconds).pipe(operators_1.share());\n    }\n    Gine.sendEvent = function (event) {\n        Gine.eventsSubject.next(event);\n    };\n    Gine.prototype.changeScene = function (scene) {\n        this.scene = scene;\n        if (this.scene && this.scene.init) {\n            this.scene.init();\n        }\n    };\n    Gine.prototype.start = function () {\n        var _this = this;\n        this.updateSubscription = this.update$.subscribe(function (t) { return _this.fn(t); });\n    };\n    Gine.prototype.stop = function () {\n        this.updateSubscription.unsubscribe();\n    };\n    Gine.prototype.frame = function () {\n        Gine.handle.clear();\n        Gine.handle.setColor(0, 0, 0);\n        if (this.scene && this.scene !== null && this.scene.frame) {\n            this.scene.frame();\n        }\n        Gine.handle.setFont(new text_1.Font('Helvetica', 10));\n        Gine.handle.setColor(0, 255, 0);\n        Gine.handle.text('' + this.fps + 'fps', 5, 16);\n        Gine.handle.text('' + this.tickrate + ' tickrate', 5, 40);\n        this.frameCount++;\n    };\n    Gine.prototype.tick = function () {\n        this.tickNr++;\n        this.delta = (performance.now() - this.then) / 1000;\n        this.then = performance.now();\n        if (this.scene && this.scene !== null && this.scene.tick) {\n            this.scene.tick(this.delta);\n        }\n    };\n    Gine.prototype.fn = function (type) {\n        if (type === 'frame') {\n            this.frame();\n        }\n        if (type === 'tick') {\n            this.tick();\n        }\n        if (type === 'second') {\n            this.updateRateData();\n        }\n    };\n    Gine.prototype.updateRateData = function () {\n        this.fps = this.frameCount;\n        this.tickrate = this.tickNr;\n        this.frameCount = 0;\n        this.tickNr = 0;\n        if (this.scene && this.scene !== null && this.scene.second) {\n            this.scene.second();\n        }\n    };\n    Gine.eventsSubject = new rxjs_1.Subject();\n    return Gine;\n}());\nexports.Gine = Gine;\n"},"sourceMaps":{"js":{"version":3,"file":"core.js","sourceRoot":"","sources":["../../src/gine/core.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"693844f3c776bfea9f5659959324f87d","cacheData":{"env":{}}}